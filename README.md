# 1.1 Задание


~Ставим packer, VirtualBox, vagrant(для задания 1.2). Создаем в текстовом редакторе файл конфигурации для packer с расширением Ubuntu64.json, собираем его по частям из репозоториев на github и читаем мануал по packer. 
preseed.cfg -  набор команд для установки Ubuntu таких как, например, нажатие клавиш ввод при загрузке ОС или выбор языка
postinstall.sh - скрипт для  обновления и установки программ после установки ОС~


~ В нем(файле json) написано, что мы берем стандартный образ Ubuntu (ключ iso_url), инсталлируем его, используя набор команд из preseed.cfg, а потом выполняем внутри скрипт postinstall.sh
Preseed-файл — это простой текстовый файл, в котором каждая строка содержит ответ на один вопрос (Ubuntu)conf. Строка разбита на четыре поля, разделённых между собой пробельными символами (пробелами или символами табуляции), например d-i mirror/suite string stable:
первое поле — это «владелец» вопроса; «d-i» используется для вопросов, относящихся к установщику, но это также может быть имя пакета для вопросов, относящихся к пакетам Ubuntu;
второе поле — это идентификатор вопроса;
третье — тип вопроса;
четвёртое -  и последнее поле содержит значение ответа. Заметьте, что оно должно быть отделено от третьего поля одним пробелом; если пробелов больше одного, последующие пробелы будут считаться частью значения.
Простейший путь написать preseed-файл — установить систему вручную. После этого debconf-get-selections --installer предоставит ответы, относящиеся к установщику. Ответы о других пакетах могут быть получены с помощью (для дебиан)debconf-get-selections. Однако более правильным решением будет написать preseed-файл вручную, руководствуясь примером и справочной документацией: при таком подходе пресидингу подвергнутся только вопросы, для которых следует изменить значение ответа по умолчанию;~
 

~ Если используется метод initrd, то нужно убедиться, что файл с именем preseed.cfg https://github.com/heizo/packer-ubuntu-18.04/blob/master/http/preseed.cfg  лежит в корневом каталоге initrd. Программа установки автоматически проверяет наличие этого файла и загружает его.
Для других методов автоматической установки нужно указать при загрузке программе установки какой файл использовать при загрузке. Это можно сделать через параметр загрузки ядра, вручную во время загрузки или изменив файл настройки системного загрузчика.
Если вы указываете файл ответов в настройке системного загрузчика, то можно изменить конфигурацию таким образом, чтобы не нажимать клавишу ввод для загрузки программы установки. Для syslinux это достигается установкой timeout равным 1 в файле .cfg.
Чтобы убедиться, что программа установки получила правильный файл ответов, нужно дополнительно указать контрольную сумму файла. Это значение вычисляется с помощью md5sum, или подобной программы или записано на сайте где скачиваешь этот файл, оно(число) должно соответствовать указываемому файлу, иначе программа установки не будет использовать данный файл.
Файл postinstall.sh Выполняет , обновление и установку программ в установленой ОС ~

'''

# postinstall.sh created from Mitchell's official lucid32/64 baseboxes

date > /etc/vagrant_box_build_time

~Cобираем все в одну папку. Vagrant(нужнодля следующего задания), packer, postinstall.sh, preseed.cfg, ubuntu64.json, 
проверяем packerом ( возможно будет нужно, а возможно нет, но лучше запомнить что во вкладке "изменение системных переменных сред " - "переменные среды"
-"системные переменные" строка path должен быть прописан путь) набираем команду проверки файла .json~

'lab-1.1\packer.exe validate lab-1.1\ubuntu64.json'

~Находять в катологе с файлом .json, запускаем packer build и ждем пока  ОС установится. При условии что ошибок не было, собираем box командой~

'\lab-1.1> packer build \lab-1.1\ubuntu64.json'
  
 



